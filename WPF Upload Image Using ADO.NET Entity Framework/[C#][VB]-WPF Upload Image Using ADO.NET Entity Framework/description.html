<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head><link rel="stylesheet" type="text/css" href="description/Combined.css,0:sprite;/Areas/Epx/Themes/Windows/Content:0&amp;amp;hashKey=15EDE1F25211E852032D2691D5FEB7B8" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="description/7d2bad6c-5f3d-43bd-a93e-cfb4b4f310b7Combined.css,0:sprite,1:LinkList;/Areas/Epx/Themes/Windows/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;hashKey=52ADCBE5376E50AE6798D3D038D063E9" xmlns="http://www.w3.org/1999/xhtml" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>WPF Upload Image Using ADO.NET Entity Framework</title>
        <link href="description/Galleries.css" type="text/css" rel="Stylesheet" /><link href="description/Layout.css" type="text/css" rel="Stylesheet" /><link href="description/Brand.css" type="text/css" rel="Stylesheet" /><link href="description/d020ced8-e9eb-4b2f-a45b-d012b7f8a40aBrand.css" type="text/css" rel="Stylesheet" />
        <link href="description/iframedescription.css" rel="Stylesheet" type="text/css" />
        <script src="description/offline.js" type="text/javascript"></script>
        <style type="text/css">
            #projectInfo {
                overflow: auto;
            }
            #longDesc {
                clear:both;
                margin: 25px 0 10px 0;
            }

            #SampleIndexList{
                margin-left: 15px;
            }
        </style>
    </head>
<body>
    <div id="offlineDescription">
        <h1>WPF Upload Image Using ADO.NET Entity Framework</h1>
        <br/>
        <div id="projectInfo">
            <div class="section">
                    <div class="itemBarLong tagsContainer">
                        <label for="Technologies">Technologies</label>
                        <div id="Technologies">
                            C#, SQL Server, ADO.NET Entity Framework, WPF, VB.Net
                        </div>
                    </div>
                    <div class="itemBarLong tagsContainer">
                        <label for="Topics">Topics</label>
                        <div id="Topics">
                            ADO.NET Entity Framework, WPF
                        </div>
                    </div>
                <div class="itemBarLong">
                    <label for="Platforms">Platforms</label>
                    <div id="Platforms">
                        Desktop, Data
                    </div>
                </div>
                <div class="itemBarLong">
                    <label for="Requirements">Requirements</label>
                    <div id="Requirements">
                        
                    </div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Primary language</label>
                    <div id="LastUpdated">en-US</div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Last updated</label>
                    <div id="LastUpdated">9/18/2013</div>
                </div>
                <div class="itemBarLong">
                    <label for="License">License</label>
                    <div id="License">
                        <a href="license.rtf">Apache License, Version 2.0</a></div>
                </div>
                <div class="itemBar">
                    <div class="viewonlinecont">
                        <a data-link="online" href="http://code.msdn.microsoft.com/windowsdesktop/WPF-Upload-Image-Using-b8d1daed">View this sample online</a>
                    </div>
                </div>
            </div>
        </div>
        
                   
<script type="text/javascript">
    function initializePage() {
        var otherTabClass = 'otherTab';
        var hiddenPreClass = 'hidden';

        var htmlDecode = function(encodedData) {
            var decodedData = "";
            if (encodedData) {
                var div = document.createElement('div');
                div.innerHTML = encodedData;
                decodedData = div.firstChild.nodeValue.replace( /\\r\\n/ig , '\r\n');
            }
            return decodedData;
        };
                
        Galleries.iterateElem(Galleries.findElem(null, 'div', 'scriptcode'), function (index, scriptBlock) {
            var titleElem = Galleries.findElem(scriptBlock, 'div', 'title')[0];
            var labelElems = Galleries.findElem(titleElem, 'span');
            if (labelElems.length == 0) {
                labelElems = titleElem;
            }
            var languageSpans = Galleries.findElem(scriptBlock, 'span', 'hidden');
            var pres = Galleries.findElem(scriptBlock, 'pre');
            if (languageSpans.length > 0 && pres.length > 1) {
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    var languageSpan = languageSpans[index];
                            
                    elem.code = codePre.innerHTML.replace( /(\r(\n)?)|((\r)?\n)/ig , '\\r\\n');
                            
                    codePre.className = codePre.className.replace(hiddenPreClass, '');
                            
                    languageSpan.parentNode.removeChild(languageSpan);
                });

                pres = Galleries.findElem(scriptBlock, 'pre');
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    if (index == 0) {
                        scriptBlock.activeTab = 0;
                    }
                    else {
                        labelSpan.className += otherTabClass;
                        codePre.className += hiddenPreClass;
                    }
                    Galleries.attachEventHandler(labelSpan, 'click', function(e) {
                        var activeTab = scriptBlock.activeTab;
                        labelElems[activeTab].className += otherTabClass;
                        pres[activeTab].className += hiddenPreClass;

                        codePre.className = codePre.className.replace(hiddenPreClass, '');
                        labelSpan.className = labelSpan.className.replace(otherTabClass, '');
                        scriptBlock.activeTab = index;
                    });
                });

                var preview = Galleries.findElem(scriptBlock, 'div', 'preview');
                if (preview.length == 0) {
                    preview.push(pres[pres.length - 1]);
                }
                Galleries.iterateElem(preview, function(index, elem) {
                    elem.parentNode.removeChild(elem);
                });

                if (window.clipboardData && clipboardData.setData) {
                    var copyLink = document.createElement('a');
                    copyLink.href = 'javascript:void(0);';
                    copyLink.className = 'copyCode';
                    copyLink.innerHTML = 'Copy code';
                    Galleries.attachEventHandler(copyLink, 'click', function (e) {
                        clipboardData.setData("Text", htmlDecode(labelElems[scriptBlock.activeTab].code));
                        return false;
                    });
                    scriptBlock.insertBefore(copyLink, scriptBlock.childNodes[0]);
                }
            }
        });
    }

    Galleries.onWindowLoad(function(){
        initializePage();
    });

</script>
<div id="longDesc">
    
<h1>Introduction</h1>
<div><span style="font-size:small"><em>This is a WPF&nbsp;sample to show how to choose an image and upload it to database using ADO.NET Entity Framework.</em></span><span>
<div>&nbsp;</div>
<img id="96408" src="description/2013-09-18_135534.jpg" alt="" width="525" height="350"></span></div>
<h1><span>Building the Sample</span></h1>
<div>&nbsp;</div>
<div><span style="font-size:small">
<div>
<div><em>
<div>After downloading this project, you should create a database&nbsp;called <strong>
dbtest</strong>&nbsp;first.</div>
<div>&nbsp;</div>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>SQL</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">mysql</span>
<pre class="hidden">USE [dbtest]
GO

SET ANSI_NULLS ON
GO

SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE [dbo].[imageinfo](
	[ID] [int] IDENTITY(1,1) NOT NULL,
	[Name] [nvarchar](50) NULL,
	[ImgData] [image] NULL,
 CONSTRAINT [PK_imageinfo] PRIMARY KEY CLUSTERED 
(
	[ID] ASC
)WITH (PAD_INDEX = OFF, STATISTICS_NORECOMPUTE = OFF, IGNORE_DUP_KEY = OFF, ALLOW_ROW_LOCKS = ON, ALLOW_PAGE_LOCKS = ON) ON [PRIMARY]
) ON [PRIMARY] TEXTIMAGE_ON [PRIMARY]

GO</pre>
<div class="preview">
<pre class="js">USE&nbsp;[dbtest]&nbsp;
GO&nbsp;
&nbsp;
SET&nbsp;ANSI_NULLS&nbsp;ON&nbsp;
GO&nbsp;
&nbsp;
SET&nbsp;QUOTED_IDENTIFIER&nbsp;ON&nbsp;
GO&nbsp;
&nbsp;
CREATE&nbsp;TABLE&nbsp;[dbo].[imageinfo](&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;[ID]&nbsp;[int]&nbsp;IDENTITY(<span class="js__num">1</span>,<span class="js__num">1</span>)&nbsp;NOT&nbsp;NULL,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;[Name]&nbsp;[nvarchar](<span class="js__num">50</span>)&nbsp;NULL,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;[ImgData]&nbsp;[image]&nbsp;NULL,&nbsp;
&nbsp;CONSTRAINT&nbsp;[PK_imageinfo]&nbsp;PRIMARY&nbsp;KEY&nbsp;CLUSTERED&nbsp;&nbsp;
(&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;[ID]&nbsp;ASC&nbsp;
)WITH&nbsp;(PAD_INDEX&nbsp;=&nbsp;OFF,&nbsp;STATISTICS_NORECOMPUTE&nbsp;=&nbsp;OFF,&nbsp;IGNORE_DUP_KEY&nbsp;=&nbsp;OFF,&nbsp;ALLOW_ROW_LOCKS&nbsp;=&nbsp;ON,&nbsp;ALLOW_PAGE_LOCKS&nbsp;=&nbsp;ON)&nbsp;ON&nbsp;[PRIMARY]&nbsp;
)&nbsp;ON&nbsp;[PRIMARY]&nbsp;TEXTIMAGE_ON&nbsp;[PRIMARY]&nbsp;
&nbsp;
GO</pre>
</div>
</div>
</div>
<div class="endscriptcode">&nbsp;</div>
<div>And&nbsp;you should also update the Entity Framework Model.</div>
<div>&nbsp;</div>
</em>
<div></div>
</div>
</div>
</span></div>
<h1>Description</h1>
<div><span style="font-size:small"><em>&nbsp;</em></span>&nbsp;</div>
<div><span style="font-size:small"><em>In the Click&nbsp;event of Browse button, I used&nbsp;<a class="libraryLink" href="http://msdn.microsoft.com/en-US/library/System.Windows.Forms.OpenFileDialog.aspx"  title="Auto generated link to System.Windows.Forms.OpenFileDialog">System.Windows.Forms.OpenFileDialog</a> control to browse images, display the image's&nbsp;name in TextBox.</em><em>&nbsp;</em></span></div>
<div>&nbsp;</div>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span><span>Visual Basic</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span><span class="hidden">vb</span>
<pre class="hidden">private void Button_Click(object sender, RoutedEventArgs e)
{
            OpenFileDialog FileDialog = new <a class="libraryLink" href="http://msdn.microsoft.com/en-US/library/System.Windows.Forms.OpenFileDialog.aspx"  title="Auto generated link to System.Windows.Forms.OpenFileDialog">System.Windows.Forms.OpenFileDialog</a>();
            FileDialog.Title = &quot;Select A File&quot;;
            FileDialog.InitialDirectory = &quot;&quot;;
            FileDialog.Filter = &quot;Image Files (*.gif,*.jpg,*.jpeg,*.bmp,*.png)|*.gif;*.jpg;*.jpeg;*.bmp;*.png&quot;;
            FileDialog.FilterIndex = 1;

            if (FileDialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            {
                TextBox1.Text = FileDialog.FileName;
                Label1.Content = GetFileNameNoExt(TextBox1.Text.Trim());
                BitmapImage bmp = new BitmapImage(new Uri(TextBox1.Text.Trim()));
                image1.Source = bmp;
            }
            else
            {
                Label1.Content = &quot;You didn't select any image file....&quot;;
            }
}

public string GetFileNameNoExt(string FilePathFileName)
{
            return <a class="libraryLink" href="http://msdn.microsoft.com/en-US/library/System.IO.Path.GetFileNameWithoutExtension.aspx"  title="Auto generated link to System.IO.Path.GetFileNameWithoutExtension">System.IO.Path.GetFileNameWithoutExtension</a>(FilePathFileName);
}</pre>
<pre class="hidden">Private Sub Button_Click(sender As Object, e As RoutedEventArgs)
        Dim FileDialog As New <a class="libraryLink" href="http://msdn.microsoft.com/en-US/library/System.Windows.Forms.OpenFileDialog.aspx"  title="Auto generated link to System.Windows.Forms.OpenFileDialog">System.Windows.Forms.OpenFileDialog</a>
        FileDialog.Title = &quot;Select A File&quot;
        FileDialog.InitialDirectory = &quot;&quot;
        FileDialog.Filter = &quot;Image Files (*.gif,*.jpg,*.jpeg,*.bmp,*.png)|*.gif;*.jpg;*.jpeg;*.bmp;*.png&quot;
        FileDialog.FilterIndex = 1

        If FileDialog.ShowDialog() = System.Windows.Forms.DialogResult.OK Then
            TextBox1.Text = FileDialog.FileName()
            Label1.Content = GetFileNameNoExt(TextBox1.Text.Trim)
            Dim bmp As New BitmapImage(New Uri(TextBox1.Text.Trim))
            image1.Source = bmp
        Else
            Label1.Content = &quot;You didn't select any image file....&quot;
        End If
    End Sub

    Public Function GetFileNameNoExt(FilePathFileName As String) As String
        On Error Resume Next
        Dim i As Integer, J As Integer, k As Integer
        i = Len(FilePathFileName)
        J = InStrRev(FilePathFileName, &quot;\&quot;)
        k = InStrRev(FilePathFileName, &quot;.&quot;)
        If k = 0 Then
            GetFileNameNoExt = Mid$(FilePathFileName, J &#43; 1, i - J)
        Else
            GetFileNameNoExt = Mid$(FilePathFileName, J &#43; 1, k - J - 1)
        End If

    End Function</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">private</span>&nbsp;<span class="cs__keyword">void</span>&nbsp;Button_Click(<span class="cs__keyword">object</span>&nbsp;sender,&nbsp;RoutedEventArgs&nbsp;e)&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;OpenFileDialog&nbsp;FileDialog&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;<a class="libraryLink" href="http://msdn.microsoft.com/en-US/library/System.Windows.Forms.OpenFileDialog.aspx"  title="Auto generated link to System.Windows.Forms.OpenFileDialog">System.Windows.Forms.OpenFileDialog</a>();&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDialog.Title&nbsp;=&nbsp;<span class="cs__string">&quot;Select&nbsp;A&nbsp;File&quot;</span>;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDialog.InitialDirectory&nbsp;=&nbsp;<span class="cs__string">&quot;&quot;</span>;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDialog.Filter&nbsp;=&nbsp;<span class="cs__string">&quot;Image&nbsp;Files&nbsp;(*.gif,*.jpg,*.jpeg,*.bmp,*.png)|*.gif;*.jpg;*.jpeg;*.bmp;*.png&quot;</span>;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileDialog.FilterIndex&nbsp;=&nbsp;<span class="cs__number">1</span>;&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">if</span>&nbsp;(FileDialog.ShowDialog()&nbsp;==&nbsp;System.Windows.Forms.DialogResult.OK)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TextBox1.Text&nbsp;=&nbsp;FileDialog.FileName;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Label1.Content&nbsp;=&nbsp;GetFileNameNoExt(TextBox1.Text.Trim());&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BitmapImage&nbsp;bmp&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;BitmapImage(<span class="cs__keyword">new</span>&nbsp;Uri(TextBox1.Text.Trim()));&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;image1.Source&nbsp;=&nbsp;bmp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">else</span>&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Label1.Content&nbsp;=&nbsp;<span class="cs__string">&quot;You&nbsp;didn't&nbsp;select&nbsp;any&nbsp;image&nbsp;file....&quot;</span>;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
}&nbsp;
&nbsp;
<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">string</span>&nbsp;GetFileNameNoExt(<span class="cs__keyword">string</span>&nbsp;FilePathFileName)&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">return</span>&nbsp;<a class="libraryLink" href="http://msdn.microsoft.com/en-US/library/System.IO.Path.GetFileNameWithoutExtension.aspx"  title="Auto generated link to System.IO.Path.GetFileNameWithoutExtension">System.IO.Path.GetFileNameWithoutExtension</a>(FilePathFileName);&nbsp;
}</pre>
</div>
</div>
</div>
<div><em><span style="font-size:small">In the Click event of Upload button, note that&nbsp;the process of Entity Framework:
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span><span>Visual Basic</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span><span class="hidden">vb</span>
<pre class="hidden">private void SaveImage_Click(object sender, RoutedEventArgs e)
{
            FileStream Stream = new FileStream(TextBox1.Text, FileMode.Open, FileAccess.Read);
            StreamReader Reader = new StreamReader(Stream);
            Byte[] ImgData = new Byte[Stream.Length - 1];
            Stream.Read(ImgData, 0, (int)Stream.Length - 1);
            using (dbtestEntities db = new dbtestEntities())
            {
                imageinfo o = db.imageinfoes.Create();
                o.Name = GetFileNameNoExt(TextBox1.Text);
                o.ImgData = ImgData;
                db.imageinfoes.Add(o);
                db.SaveChanges();
            }

            Label1.Content = GetFileNameNoExt(TextBox1.Text.Trim()) &#43; &quot; Stored Successfully....&quot;;
}</pre>
<pre class="hidden">Private Sub SaveImage_Click(sender As Object, e As RoutedEventArgs) Handles SaveImage.Click
        Dim Stream As FileStream
        Dim Reader As StreamReader
        Stream = New FileStream(TextBox1.Text, FileMode.Open, FileAccess.Read)
        Reader = New StreamReader(Stream)
        Dim ImgData(Stream.Length - 1) As Byte
        Stream.Read(ImgData, 0, Stream.Length - 1)
        
        Using db As New dbtestEntities()
            Dim o As imageinfo = db.imageinfoes.Create()
            o.Name = GetFileNameNoExt(TextBox1.Text)
            o.ImgData = ImgData
            db.imageinfoes.Add(o)
            db.SaveChanges()
        End Using

        Label1.Content = GetFileNameNoExt(TextBox1.Text.Trim) &amp; &quot; Stored Successfully....&quot;
    End Sub</pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">private</span>&nbsp;<span class="cs__keyword">void</span>&nbsp;SaveImage_Click(<span class="cs__keyword">object</span>&nbsp;sender,&nbsp;RoutedEventArgs&nbsp;e)&nbsp;
{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;FileStream&nbsp;Stream&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;FileStream(TextBox1.Text,&nbsp;FileMode.Open,&nbsp;FileAccess.Read);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;StreamReader&nbsp;Reader&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;StreamReader(Stream);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Byte[]&nbsp;ImgData&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;Byte[Stream.Length&nbsp;-&nbsp;<span class="cs__number">1</span>];&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Stream.Read(ImgData,&nbsp;<span class="cs__number">0</span>,&nbsp;(<span class="cs__keyword">int</span>)Stream.Length&nbsp;-&nbsp;<span class="cs__number">1</span>);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">using</span>&nbsp;(dbtestEntities&nbsp;db&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;dbtestEntities())&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;imageinfo&nbsp;o&nbsp;=&nbsp;db.imageinfoes.Create();&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o.Name&nbsp;=&nbsp;GetFileNameNoExt(TextBox1.Text);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;o.ImgData&nbsp;=&nbsp;ImgData;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.imageinfoes.Add(o);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;db.SaveChanges();&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Label1.Content&nbsp;=&nbsp;GetFileNameNoExt(TextBox1.Text.Trim())&nbsp;&#43;&nbsp;<span class="cs__string">&quot;&nbsp;Stored&nbsp;Successfully....&quot;</span>;&nbsp;
}</pre>
</div>
</div>
</div>
<div class="endscriptcode">&nbsp;</div>
</span></em></div>
<div><span>
<div>
<div>
<div>
<div><strong><span style="font-size:small">Entity states and SaveChanges:</span></strong></div>
<div></div>
<div><span style="font-size:small">An entity can be in one of five states as defined by the EntityState enumeration. These states are:</span></div>
<div></div>
<ul>
<li><em><span style="font-size:small">Added: the entity is being tracked by the context but does not yet exist in the database</span>
</em></li><li><em><span style="font-size:small">&nbsp;</span><span style="font-size:small">Unchanged: the entity is being tracked by the context and exists in the database, and its property values have not changed from the values in the database</span>
</em></li><li><em><span style="font-size:small">&nbsp;</span><span style="font-size:small">Modified: the entity is being tracked by the context and exists in the database, and some or all of its property values have been modified</span>
</em></li><li><em><span style="font-size:small">&nbsp;</span><span style="font-size:small">Deleted: the entity is being tracked by the context and exists in the database, but has been marked for deletion from the database the next time SaveChanges is called</span>
</em></li><li><em><span style="font-size:small">&nbsp;</span><span style="font-size:small">Detached: the entity is not being tracked by the context</span>
</em></li></ul>
<div></div>
<div><strong><span style="font-size:small">SaveChanges does different things for entities in different states:</span></strong></div>
<div></div>
<ul>
<li><em><span style="font-size:small">Unchanged entities are not touched by SaveChanges. Updates are not sent to the database for entities in the Unchanged state.</span>
</em></li><li><em><span style="font-size:small">&nbsp;</span><span style="font-size:small">Added entities are inserted into the database and then become Unchanged when SaveChanges returns.</span>
</em></li><li><em><span style="font-size:small">&nbsp;</span><span style="font-size:small">Modified entities are updated in the database and then become Unchanged when SaveChanges returns.</span>
</em></li><li><em><span style="font-size:small">&nbsp;</span><span style="font-size:small">Deleted entities are deleted from the database and are then detached from the context.</span></em>
</li></ul>
<div></div>
<div></div>
<h1>Source Code Files</h1>
<ul>
<li><em>MainWindow.xaml&nbsp; - MainWindow XAML </em></li><li><em>MainWindow.xaml.cs/vb&nbsp; -&nbsp; MainWindow Code Behind </em></li><li><em>Model1.edmx&nbsp; - Entity Framework Model </em></li><li><em>ReadMe.txt&nbsp; - Design database </em></li></ul>
</div>
</div>
</div>
</span></div>

</div>


    </div>
</body>
</html>
