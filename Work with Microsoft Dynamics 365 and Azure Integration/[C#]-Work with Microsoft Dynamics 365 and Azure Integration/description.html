<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head><link rel="stylesheet" type="text/css" href="https://uhf.microsoft.com/mscc/statics/mscc-0.4.0.min.css" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:Header,0:HeaderFooterSprite,0:Header.NonMtps;/Areas/Centers/Themes/StandardDevCenter/Content:0&amp;amp;v=645847E286247732C56097F564F6E2F9" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:Footer,0:HeaderFooterSprite,0:Footer.NonMtps,1:NewFooterSock,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;v=DCDE209A80284FC75CEAAA34283AAE44" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Work with Microsoft Dynamics 365 and Azure Integration</title>
        <link href="description/Galleries.css" type="text/css" rel="Stylesheet" /><link href="description/Layout.css" type="text/css" rel="Stylesheet" /><link href="description/Brand.css" type="text/css" rel="Stylesheet" />
        <link href="https://i1.code.msdn.s-msft.com/content/common/iframedescription.css" rel="Stylesheet" type="text/css" />
        <script src="https://i1.code.msdn.s-msft.com/content/common/offline.js" type="text/javascript"></script>
        <style type="text/css">
            #projectInfo {
                overflow: auto;
            }
            #longDesc {
                clear:both;
                margin: 25px 0 10px 0;
            }

            #SampleIndexList{
                margin-left: 15px;
            }
        </style>
    </head>
<body>
    <div id="offlineDescription">
        <h1>Work with Microsoft Dynamics 365 and Azure Integration</h1>
        <br/>
        <div id="projectInfo">
            <div class="section">
                    <div class="itemBarLong tagsContainer">
                        <label for="Technologies">Technologies</label>
                        <div id="Technologies">
                            Microsoft Azure, Microsoft Dynamics CRM, Dynamics 365 Customer Engagement
                        </div>
                    </div>
                    <div class="itemBarLong tagsContainer">
                        <label for="Topics">Topics</label>
                        <div id="Topics">
                            Microsoft Azure, library assembly, Microsoft Dynamics CRM SDK
                        </div>
                    </div>
                <div class="itemBarLong">
                    <label for="Platforms">Platforms</label>
                    <div id="Platforms">
                        Cloud, Data
                    </div>
                </div>
                <div class="itemBarLong">
                    <label for="Requirements">Requirements</label>
                    <div id="Requirements">
                        
                    </div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Primary language</label>
                    <div id="LastUpdated">en-US</div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Updated</label>
                    <div id="LastUpdated">6/19/2018</div>
                </div>
                <div class="itemBarLong">
                    <label for="License">License</label>
                    <div id="License">
                        <a href="license.rtf">MS-LPL</a></div>
                </div>
                <div class="itemBar">
                    <div class="viewonlinecont">
                        <a data-link="online" href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a">View this sample online</a>
                    </div>
                </div>
            </div>
        </div>
        
                   
<script type="text/javascript">
    function initializePage() {
        var otherTabClass = 'otherTab';
        var hiddenPreClass = 'hidden';

        var htmlDecode = function(encodedData) {
            var decodedData = "";
            if (encodedData) {
                var div = document.createElement('div');
                div.innerHTML = encodedData;
                decodedData = div.firstChild.nodeValue.replace( /\\r\\n/ig , '\r\n');
            }
            return decodedData;
        };
                
        Galleries.iterateElem(Galleries.findElem(null, 'div', 'scriptcode'), function (index, scriptBlock) {
            var titleElem = Galleries.findElem(scriptBlock, 'div', 'title')[0];
            var labelElems = Galleries.findElem(titleElem, 'span');
            if (labelElems.length == 0) {
                labelElems = titleElem;
            }
            var languageSpans = Galleries.findElem(scriptBlock, 'span', 'hidden');
            var pres = Galleries.findElem(scriptBlock, 'pre');
            if (languageSpans.length > 0 && pres.length > 1) {
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    var languageSpan = languageSpans[index];
                            
                    elem.code = codePre.innerHTML.replace( /(\r(\n)?)|((\r)?\n)/ig , '\\r\\n');
                            
                    codePre.className = codePre.className.replace(hiddenPreClass, '');
                            
                    languageSpan.parentNode.removeChild(languageSpan);
                });

                pres = Galleries.findElem(scriptBlock, 'pre');
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    if (index == 0) {
                        scriptBlock.activeTab = 0;
                    }
                    else {
                        labelSpan.className += otherTabClass;
                        codePre.className += hiddenPreClass;
                    }
                    Galleries.attachEventHandler(labelSpan, 'click', function(e) {
                        var activeTab = scriptBlock.activeTab;
                        labelElems[activeTab].className += otherTabClass;
                        pres[activeTab].className += hiddenPreClass;

                        codePre.className = codePre.className.replace(hiddenPreClass, '');
                        labelSpan.className = labelSpan.className.replace(otherTabClass, '');
                        scriptBlock.activeTab = index;
                    });
                });

                var preview = Galleries.findElem(scriptBlock, 'div', 'preview');
                if (preview.length == 0) {
                    preview.push(pres[pres.length - 1]);
                }
                Galleries.iterateElem(preview, function(index, elem) {
                    elem.parentNode.removeChild(elem);
                });

                if (window.clipboardData && clipboardData.setData) {
                    var copyLink = document.createElement('a');
                    copyLink.href = 'javascript:void(0);';
                    copyLink.className = 'copyCode';
                    copyLink.innerHTML = 'Copy code';
                    Galleries.attachEventHandler(copyLink, 'click', function (e) {
                        clipboardData.setData("Text", htmlDecode(labelElems[scriptBlock.activeTab].code));
                        return false;
                    });
                    scriptBlock.insertBefore(copyLink, scriptBlock.childNodes[0]);
                }
            }
        });
    }

    Galleries.onWindowLoad(function(){
        initializePage();
    });

</script>
<div id="longDesc">
    
<h1>Work with Microsoft Dynamics 365 and Azure Integration</h1>
<p>Applies To: Dynamics 365 (online), Dynamics 365 (on-premises), Dynamics CRM 2016, Dynamics CRM Online</p>
<p>This section contains sample code for integrating Microsoft Dynamics 365 and Microsoft Azure through the Microsoft Azure Service Bus.</p>
<h2>Requirements</h2>
<p>For more information about the requirements for running the sample code, see <a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/org-service/use-sample-helper-code">
Use the sample and helper code</a>.<strong>&nbsp;</strong><em>&nbsp;</em></p>
<h2>Azure aware custom plug-in</h2>
<p>This is a sample custom plug-in that can post the pipeline execution context to the Microsoft Azure Service Bus.</p>
<p>The plug-in demonstrates how to obtain the execution context and the tracing service from the service provider parameter of the Execute method. The plug-in then posts the context to the Microsoft Azure Service Bus endpoint and writes information to the trace
 log to facilitate debugging.</p>
<p>Click to see the <a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/sourcecode?fileId=179917&amp;pathId=2128679881">
SandboxPlugin.cs</a> sample file.<strong>&nbsp;</strong><em>&nbsp;</em><strong>&nbsp;</strong><em>&nbsp;</em></p>
<p>More Information: <a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/sample-azure-aware-custom-plugin">
Sample: Azure aware custom plug-in</a> and <a class="selected" tabindex="0" href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/write-custom-azure-aware-plugin">
Write a custom Azure-aware plug-in</a> <strong></strong><em></em></p>
<h2>Azure aware custom workflow activity</h2>
<p>This sample obtains the data context from the current Microsoft Dynamics 365 operation and posts it to the Microsoft Azure Service Bus.</p>
<p>This sample shows how to write a custom workflow activity that can post the data context from the current Microsoft Dynamics 365 operation to the Microsoft Azure Service Bus. The posting of the data context is done through the
<a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://msdn.microsoft.com/en-us/library/microsoft.xrm.sdk.iserviceendpointnotificationservice.execute.aspx">
Execute method</a>.</p>
<p>Click to see the <a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/sourcecode?fileId=179917&amp;pathId=1656988113">
Activity.cs</a> sample file.<strong>&nbsp;</strong><em>&nbsp;</em></p>
<p>More Information: <a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/sample-azure-aware-custom-workflow-activity">
Sample: Azure aware custom workflow activity</a></p>
<h2>One-way listener</h2>
<p>This sample listener application registers a remote service plug-in that executes whenever a Microsoft Dynamics 365 message is posted to a one-way endpoint on the Microsoft Azure Service Bus. When the plug-in executes, it outputs to the console the contents
 of the Microsoft Dynamics 365 execution context contained in the message.</p>
<p>This sample shows how to write a Microsoft Azure Service Bus listener for a one-way endpoint contract.</p>
<p>Click to see the <a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/sourcecode?fileId=179917&amp;pathId=188775965">
OneWayListener.cs</a> sample file.</p>
<p>More Information: <a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/sample-two-way-listener">
One way listener</a> and <a class="selected" tabindex="0" href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/write-listener-application-azure-solution">
Write a listener application for a Microsoft Azure solution</a> <strong></strong><em></em></p>
<h2>Two-way listener</h2>
<p>This sample registers a remote service plug-in that executes whenever a Microsoft Dynamics 365 message is posted to a two-way endpoint on the Microsoft Azure Service Bus. When the plug-in executes, it prints to the console the contents of the Microsoft Dynamics
 365 execution context contained in the message.</p>
<p>This sample shows how to write a Microsoft Azure Service Bus Listener for a two-way endpoint contract.</p>
<p>Click to see the <a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/sourcecode?fileId=179917&amp;pathId=604186481">
TwoWayListener.cs</a> sample file.</p>
<p>More Information: <a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/sample-two-way-listener">
Sample: Two-way listener</a>&nbsp;and <a class="selected" tabindex="0" href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/write-listener-application-azure-solution">
Write a listener application for a Microsoft Azure solution</a> <strong></strong><em></em></p>
<h2>Rest listener</h2>
<p>This sample registers a remote service plug-in that executes whenever a Microsoft Dynamics 365 message is posted to a two-way endpoint on the Microsoft Azure Service Bus. When the plug-in executes, it prints to the console the contents of the Microsoft Dynamics
 365 execution context contained in the message.</p>
<h4>Requirements</h4>
<p>You must configure Microsoft Dynamics 365 integration with Microsoft Azure prior to registering and executing this sample activity.</p>
<h4>Demonstrates</h4>
<p>This sample shows how to write a Microsoft Azure Service Bus Listener for a REST endpoint contract.</p>
<p>This sample registers a remote service plug-in that executes whenever a Microsoft Dynamics 365 message is posted to a REST endpoint on the service bus. When the plug-in executes, it prints to the console the contents of the Microsoft Dynamics 365 execution
 context contained in the message.</p>
<p>Click to see the <a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/sourcecode?fileId=179917&amp;pathId=504898101">
RestListener.cs </a>sample file.</p>
<p>More Information: <a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/sample-rest-listener">
REST listener</a>&nbsp;and <a class="selected" tabindex="0" href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/write-listener-application-azure-solution">
Write a listener application for a Microsoft Azure solution</a> <strong></strong><em></em></p>
<h2>Persistent queue listener</h2>
<p>This sample registers a remote service plug-in that executes whenever a Microsoft Dynamics 365 message is posted to a two-way endpoint on the Microsoft Azure Service Bus. When the plug-in executes, it prints to the console the contents of the Microsoft Dynamics
 365 execution context contained in the message.</p>
<h4>Requirements</h4>
<p>This sample code requires the following additional Microsoft Visual Studio project reference: Microsoft.ServiceBus. The Microsoft.ServiceBus.dll assembly can be found in the
<a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://azure.microsoft.com/en-us/downloads/archive-net-downloads/">Microsoft Azure SDK</a>.</p>
<h4>Demonstrates</h4>
<p>This sample shows how to write a Microsoft Azure Service Bus listener application for a persistent queue endpoint contract.</p>
<p>The listener waits for a Microsoft Dynamics 365 message to be posted to the service bus and to be available in the endpoint queue. When a message is available in the queue, the listener reads the message, prints the Microsoft Dynamics 365 execution context
 contained in the message to the console, and deletes the message from the queue.</p>
<p>Click to see the <a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/sourcecode?fileId=179917&amp;pathId=852823244">
PersistentQueueListener.cs</a> sample file.</p>
<p>More Information: <a href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/sample-persistent-queue-listener">
Persistent queue listener</a>&nbsp;and <a class="selected" tabindex="0" href="https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://code.msdn.microsoft.com/Sample-Dynamics-365-and-6a95df2a/https://docs.microsoft.com/en-us/dynamics365/customer-engagement/developer/write-listener-application-azure-solution">
Write a listener application for a Microsoft Azure solution</a> <strong></strong><em></em></p>

</div>


    </div>
</body>
</html>
