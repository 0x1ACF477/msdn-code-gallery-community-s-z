<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html>
    <head><link rel="stylesheet" type="text/css" href="https://uhf.microsoft.com/mscc/statics/mscc-0.3.7.min.css" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:Header,0:HeaderFooterSprite,0:Header.NonMtps;/Areas/Centers/Themes/StandardDevCenter/Content:0&amp;amp;v=4E557785E2BDDED1CD5C2C3B6458143A" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />
<link rel="stylesheet" type="text/css" href="https://i-msdn.sec.s-msft.com/Combined.css?resources=0:Footer,0:HeaderFooterSprite,0:Footer.NonMtps,1:NewFooterSock,1:LinkList;/Areas/Centers/Themes/StandardDevCenter/Content:0,/Areas/Epx/Themes/Base/Content:1&amp;amp;v=BB208CA7577BB26F9BF04A6EC76C08A9" xmlns="http://www.w3.org/1999/xhtml" />
<link type="text/css" rel="stylesheet" xmlns="http://www.w3.org/1999/xhtml" />

        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Token Based Authentication in Web API</title>
        <link href="description/Galleries.css" type="text/css" rel="Stylesheet" /><link href="description/Layout.css" type="text/css" rel="Stylesheet" /><link href="description/Brand.css" type="text/css" rel="Stylesheet" />
        <link href="https://i1.code.msdn.s-msft.com/content/common/iframedescription.css" rel="Stylesheet" type="text/css" />
        <script src="https://i1.code.msdn.s-msft.com/content/common/offline.js" type="text/javascript"></script>
        <style type="text/css">
            #projectInfo {
                overflow: auto;
            }
            #longDesc {
                clear:both;
                margin: 25px 0 10px 0;
            }

            #SampleIndexList{
                margin-left: 15px;
            }
        </style>
    </head>
<body>
    <div id="offlineDescription">
        <h1>Token Based Authentication in Web API</h1>
        <br/>
        <div id="projectInfo">
            <div class="section">
                    <div class="itemBarLong tagsContainer">
                        <label for="Technologies">Technologies</label>
                        <div id="Technologies">
                            ASP.NET Web API, ASP.NET Web API 2
                        </div>
                    </div>
                    <div class="itemBarLong tagsContainer">
                        <label for="Topics">Topics</label>
                        <div id="Topics">
                            Security
                        </div>
                    </div>
                <div class="itemBarLong">
                    <label for="Platforms">Platforms</label>
                    <div id="Platforms">
                        Web
                    </div>
                </div>
                <div class="itemBarLong">
                    <label for="Requirements">Requirements</label>
                    <div id="Requirements">
                        
                    </div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Primary language</label>
                    <div id="LastUpdated">en-US</div>
                </div>
                <div class="itemBar">
                    <label for="LastUpdated">Updated</label>
                    <div id="LastUpdated">1/21/2018</div>
                </div>
                <div class="itemBarLong">
                    <label for="License">License</label>
                    <div id="License">
                        <a href="license.rtf">MIT</a></div>
                </div>
                <div class="itemBar">
                    <div class="viewonlinecont">
                        <a data-link="online" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9">View this sample online</a>
                    </div>
                </div>
            </div>
        </div>
        
                   
<script type="text/javascript">
    function initializePage() {
        var otherTabClass = 'otherTab';
        var hiddenPreClass = 'hidden';

        var htmlDecode = function(encodedData) {
            var decodedData = "";
            if (encodedData) {
                var div = document.createElement('div');
                div.innerHTML = encodedData;
                decodedData = div.firstChild.nodeValue.replace( /\\r\\n/ig , '\r\n');
            }
            return decodedData;
        };
                
        Galleries.iterateElem(Galleries.findElem(null, 'div', 'scriptcode'), function (index, scriptBlock) {
            var titleElem = Galleries.findElem(scriptBlock, 'div', 'title')[0];
            var labelElems = Galleries.findElem(titleElem, 'span');
            if (labelElems.length == 0) {
                labelElems = titleElem;
            }
            var languageSpans = Galleries.findElem(scriptBlock, 'span', 'hidden');
            var pres = Galleries.findElem(scriptBlock, 'pre');
            if (languageSpans.length > 0 && pres.length > 1) {
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    var languageSpan = languageSpans[index];
                            
                    elem.code = codePre.innerHTML.replace( /(\r(\n)?)|((\r)?\n)/ig , '\\r\\n');
                            
                    codePre.className = codePre.className.replace(hiddenPreClass, '');
                            
                    languageSpan.parentNode.removeChild(languageSpan);
                });

                pres = Galleries.findElem(scriptBlock, 'pre');
                Galleries.iterateElem(labelElems, function(index, elem) {
                    var codePre = pres[index];
                    var labelSpan = elem;
                    if (index == 0) {
                        scriptBlock.activeTab = 0;
                    }
                    else {
                        labelSpan.className += otherTabClass;
                        codePre.className += hiddenPreClass;
                    }
                    Galleries.attachEventHandler(labelSpan, 'click', function(e) {
                        var activeTab = scriptBlock.activeTab;
                        labelElems[activeTab].className += otherTabClass;
                        pres[activeTab].className += hiddenPreClass;

                        codePre.className = codePre.className.replace(hiddenPreClass, '');
                        labelSpan.className = labelSpan.className.replace(otherTabClass, '');
                        scriptBlock.activeTab = index;
                    });
                });

                var preview = Galleries.findElem(scriptBlock, 'div', 'preview');
                if (preview.length == 0) {
                    preview.push(pres[pres.length - 1]);
                }
                Galleries.iterateElem(preview, function(index, elem) {
                    elem.parentNode.removeChild(elem);
                });

                if (window.clipboardData && clipboardData.setData) {
                    var copyLink = document.createElement('a');
                    copyLink.href = 'javascript:void(0);';
                    copyLink.className = 'copyCode';
                    copyLink.innerHTML = 'Copy code';
                    Galleries.attachEventHandler(copyLink, 'click', function (e) {
                        clipboardData.setData("Text", htmlDecode(labelElems[scriptBlock.activeTab].code));
                        return false;
                    });
                    scriptBlock.insertBefore(copyLink, scriptBlock.childNodes[0]);
                }
            }
        });
    }

    Galleries.onWindowLoad(function(){
        initializePage();
    });

</script>
<div id="longDesc">
    
<h1>Introduction</h1>
<p><strong>Authentication&nbsp;</strong>is a vital process in system programming. Authentication means verifying the user who is accessing the system. Today we are using modern devices that have different types of Apps or software and sometimes we directly
 access the website from browser. To access this application, we probably need to pass our credentials and these systems verify it. If you are valid user then it will allow accessing the system otherwise not.</p>
<p>We have available different types of authentication in .Net programming like Windows Authentication, Forms Authentication, Claim Based Authentication, Token Based Authentication etc. Today we will discuss about Token Based Authentication in detail.</p>
<p>Token Based Authentication is not very different from other authentication mechanism but yes, it is more secure, more reliable and makes your system loosely coupled. It will be a better choice to create REST API using token-based authentication, if your
 API reached to broad range of devices like mobiles, tablets and traditional desktops.</p>
<p>In token-based authentication, you pass your credentials [user name and password], which go to authentication server. Server verifies your credentials and if it is a valid user then it will return a signed token to client system, which has expiration time.
 Client can store this token to locally using any mechanism like local storage, session storage etc and if client makes any other call to server for data then it does not need to pass its credentials every time. Client can directly pass token to server, which
 will be validated by server and if token is valid then you will able to access your data.</p>
<h2>Using the code</h2>
<p>In this demonstration, we will use&nbsp;<strong>Web API</strong>&nbsp;as a service and&nbsp;<strong>Angular JS</strong>&nbsp;as a client. So, let me create dummy database &ldquo;Test&rdquo; and two tables &ldquo;Users&rdquo; and &ldquo;Employee&rdquo; respectively.
 Users table will store the user related information like name, username and password. Employee table is basically for dummy data. You can use following SQL scripts to generate this database and tables.</p>
<p>&nbsp;</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>SQL</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">mysql</span>
<pre class="hidden">CREATE DATABASE TEST
GO

USE TEST
GO

CREATE TABLE Users(Id INT IDENTITY(1,1) PRIMARY KEY, Name varchar(255) NOT NULL, UserName varchar(50), Password varchar(50))
INSERT INTO [TEST].[dbo].[Users](Name, UserName, Password) VALUES('Mukesh Kumar', 'Mukesh', 'Mukesh@123');

CREATE TABLE Employees(Id INT IDENTITY(1,1) PRIMARY KEY, Name varchar(255) NOT NULL, Address varchar(500))
INSERT INTO Employees (Name, Address) VALUES('Mukesh Kumar', 'New Delhi')
INSERT INTO Employees (Name, Address) VALUES('John Right', 'England')
INSERT INTO Employees (Name, Address) VALUES('Chris Roy', 'France')
INSERT INTO Employees (Name, Address) VALUES('Anand Mahajan', 'Canada')
INSERT INTO Employees (Name, Address) VALUES('Prince Singh', 'India')</pre>
<div class="preview">
<pre class="js">CREATE&nbsp;DATABASE&nbsp;TEST&nbsp;
GO&nbsp;
&nbsp;
USE&nbsp;TEST&nbsp;
GO&nbsp;
&nbsp;
CREATE&nbsp;TABLE&nbsp;Users(Id&nbsp;INT&nbsp;IDENTITY(<span class="js__num">1</span>,<span class="js__num">1</span>)&nbsp;PRIMARY&nbsp;KEY,&nbsp;Name&nbsp;varchar(<span class="js__num">255</span>)&nbsp;NOT&nbsp;NULL,&nbsp;UserName&nbsp;varchar(<span class="js__num">50</span>),&nbsp;Password&nbsp;varchar(<span class="js__num">50</span>))&nbsp;
INSERT&nbsp;INTO&nbsp;[TEST].[dbo].[Users](Name,&nbsp;UserName,&nbsp;Password)&nbsp;VALUES(<span class="js__string">'Mukesh&nbsp;Kumar'</span>,&nbsp;<span class="js__string">'Mukesh'</span>,&nbsp;<span class="js__string">'Mukesh@123'</span>);&nbsp;
&nbsp;
CREATE&nbsp;TABLE&nbsp;Employees(Id&nbsp;INT&nbsp;IDENTITY(<span class="js__num">1</span>,<span class="js__num">1</span>)&nbsp;PRIMARY&nbsp;KEY,&nbsp;Name&nbsp;varchar(<span class="js__num">255</span>)&nbsp;NOT&nbsp;NULL,&nbsp;Address&nbsp;varchar(<span class="js__num">500</span>))&nbsp;
INSERT&nbsp;INTO&nbsp;Employees&nbsp;(Name,&nbsp;Address)&nbsp;VALUES(<span class="js__string">'Mukesh&nbsp;Kumar'</span>,&nbsp;<span class="js__string">'New&nbsp;Delhi'</span>)&nbsp;
INSERT&nbsp;INTO&nbsp;Employees&nbsp;(Name,&nbsp;Address)&nbsp;VALUES(<span class="js__string">'John&nbsp;Right'</span>,&nbsp;<span class="js__string">'England'</span>)&nbsp;
INSERT&nbsp;INTO&nbsp;Employees&nbsp;(Name,&nbsp;Address)&nbsp;VALUES(<span class="js__string">'Chris&nbsp;Roy'</span>,&nbsp;<span class="js__string">'France'</span>)&nbsp;
INSERT&nbsp;INTO&nbsp;Employees&nbsp;(Name,&nbsp;Address)&nbsp;VALUES(<span class="js__string">'Anand&nbsp;Mahajan'</span>,&nbsp;<span class="js__string">'Canada'</span>)&nbsp;
INSERT&nbsp;INTO&nbsp;Employees&nbsp;(Name,&nbsp;Address)&nbsp;VALUES(<span class="js__string">'Prince&nbsp;Singh'</span>,&nbsp;<span class="js__string">'India'</span>)</pre>
</div>
</div>
</div>
<p>&nbsp;</p>
<p>Move to next and create a service that will implement token-based authentication. So, going to create a Web API project and for client application we will use Angular JS&nbsp;from where we will pass user credentials.</p>
<p>To create Web API project, first open&nbsp;<strong>Visual Studio 2015&nbsp;</strong>and go to File menu and select&nbsp;<strong>New&nbsp;</strong>and then&nbsp;<strong>Project</strong>. It will open a New Project windows, select Web from Installed Template
 and then from right pane, choose &ldquo;<strong>Asp.Net Web Application</strong>&rdquo;. Provide the name like &ldquo;<strong>EmployeeService</strong>&rdquo; and click to&nbsp;<strong>OK</strong>.</p>
<p>Next windows will provide you options to choose web application template. Here you need to choose Web API with No Authentication and click to OK. Therefore, your application is ready to run.</p>
<p>Before moving next, to implement token-based authentication, we have to add following packages as a references from&nbsp;<strong>NuGet Package Manager</strong>. So, just right click on references in solution and select Manage NuGet Packages. It will open
 a NuGet Package Manager windows, you can search these packages one by one from search box in Browse tab. Once these packages are able to find out in NuGet click to Install. After Installtion, these packages will be available in references.</p>
<ol>
<li><strong><a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/Microsoft.Owin.aspx"  title="Auto generated link to Microsoft.Owin">Microsoft.Owin</a></strong> </li><li><strong><a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/Microsoft.Owin.Host.SystemWeb.aspx"  title="Auto generated link to Microsoft.Owin.Host.SystemWeb">Microsoft.Owin.Host.SystemWeb</a></strong> </li><li><strong><a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/Microsoft.Owin.Security.OAuth.aspx"  title="Auto generated link to Microsoft.Owin.Security.OAuth">Microsoft.Owin.Security.OAuth</a></strong> </li><li><strong><a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/Microsoft.Owin.Security.aspx"  title="Auto generated link to Microsoft.Owin.Security">Microsoft.Owin.Security</a></strong> </li><li><strong><a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/Microsoft.AspNet.Identity.Owin.aspx"  title="Auto generated link to Microsoft.AspNet.Identity.Owin">Microsoft.AspNet.Identity.Owin</a></strong> </li></ol>
<p>In this demonstration, we will not use Global.asax file. So,&nbsp;first, delete the&nbsp;<strong>Global.asax</strong>&nbsp;from solution and add new class &ldquo;<strong>Startup.cs</strong>&rdquo; at the same location of Global.asax file and add following
 code.</p>
<p>&nbsp;</p>
<div class="scriptcode">
<div class="pluginEditHolder" pluginCommand="mceScriptCode">
<div class="title"><span>C#</span></div>
<div class="pluginLinkHolder"><span class="pluginEditHolderLink">Edit</span>|<span class="pluginRemoveHolderLink">Remove</span></div>
<span class="hidden">csharp</span>
<pre class="hidden">using EmployeeService.Provider;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/Microsoft.Owin.aspx"  title="Auto generated link to Microsoft.Owin">Microsoft.Owin</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/Microsoft.Owin.Security.OAuth.aspx"  title="Auto generated link to Microsoft.Owin.Security.OAuth">Microsoft.Owin.Security.OAuth</a>;
using Owin;
using System;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/System.Collections.Generic.aspx"  title="Auto generated link to System.Collections.Generic">System.Collections.Generic</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/System.Linq.aspx"  title="Auto generated link to System.Linq">System.Linq</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/System.Web.aspx"  title="Auto generated link to System.Web">System.Web</a>;
using <a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/System.Web.Http.aspx"  title="Auto generated link to System.Web.Http">System.Web.Http</a>;

[assembly: OwinStartup(typeof(EmployeeService.Startup))]
namespace EmployeeService
{    
    public class Startup
    {
        public void ConfigureAuth(IAppBuilder app)
        {
           
            var OAuthOptions = new OAuthAuthorizationServerOptions
            {
                AllowInsecureHttp = true,
                TokenEndpointPath = new PathString(&quot;/token&quot;),
                AccessTokenExpireTimeSpan = TimeSpan.FromMinutes(20),
                Provider = new SimpleAuthorizationServerProvider()
            };

            app.UseOAuthBearerTokens(OAuthOptions);
            app.UseOAuthAuthorizationServer(OAuthOptions);
            app.UseOAuthBearerAuthentication(new OAuthBearerAuthenticationOptions());

            HttpConfiguration config = new HttpConfiguration();
            WebApiConfig.Register(config);
        }

        public void Configuration(IAppBuilder app)
        {
            ConfigureAuth(app);
            GlobalConfiguration.Configure(WebApiConfig.Register);
        }
    }
}
 </pre>
<div class="preview">
<pre class="csharp"><span class="cs__keyword">using</span>&nbsp;EmployeeService.Provider;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/Microsoft.Owin.aspx"  title="Auto generated link to Microsoft.Owin">Microsoft.Owin</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/Microsoft.Owin.Security.OAuth.aspx"  title="Auto generated link to Microsoft.Owin.Security.OAuth">Microsoft.Owin.Security.OAuth</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;Owin;&nbsp;
<span class="cs__keyword">using</span>&nbsp;System;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/System.Collections.Generic.aspx"  title="Auto generated link to System.Collections.Generic">System.Collections.Generic</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/System.Linq.aspx"  title="Auto generated link to System.Linq">System.Linq</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/System.Web.aspx"  title="Auto generated link to System.Web">System.Web</a>;&nbsp;
<span class="cs__keyword">using</span>&nbsp;<a class="libraryLink" href="https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://code.msdn.microsoft.com/Token-Based-Authentication-6db2acc9/https://msdn.microsoft.com/en-US/library/System.Web.Http.aspx"  title="Auto generated link to System.Web.Http">System.Web.Http</a>;&nbsp;
&nbsp;
[assembly:&nbsp;OwinStartup(<span class="cs__keyword">typeof</span>(EmployeeService.Startup))]&nbsp;
<span class="cs__keyword">namespace</span>&nbsp;EmployeeService&nbsp;
{&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">class</span>&nbsp;Startup&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">void</span>&nbsp;ConfigureAuth(IAppBuilder&nbsp;app)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;var&nbsp;OAuthOptions&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;OAuthAuthorizationServerOptions&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AllowInsecureHttp&nbsp;=&nbsp;<span class="cs__keyword">true</span>,&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TokenEndpointPath&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;PathString(<span class="cs__string">&quot;/token&quot;</span>),&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;AccessTokenExpireTimeSpan&nbsp;=&nbsp;TimeSpan.FromMinutes(<span class="cs__number">20</span>),&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Provider&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;SimpleAuthorizationServerProvider()&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;app.UseOAuthBearerTokens(OAuthOptions);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;app.UseOAuthAuthorizationServer(OAuthOptions);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;app.UseOAuthBearerAuthentication(<span class="cs__keyword">new</span>&nbsp;OAuthBearerAuthenticationOptions());&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;HttpConfiguration&nbsp;config&nbsp;=&nbsp;<span class="cs__keyword">new</span>&nbsp;HttpConfiguration();&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WebApiConfig.Register(config);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="cs__keyword">public</span>&nbsp;<span class="cs__keyword">void</span>&nbsp;Configuration(IAppBuilder&nbsp;app)&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConfigureAuth(app);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;GlobalConfiguration.Configure(WebApiConfig.Register);&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;
}&nbsp;
&nbsp;</pre>
</div>
</div>
</div>
<p>In the above code, you can see, we are using&nbsp;<strong>OWIN&nbsp;</strong>[Open Web Interface for .Net] that is an interface between your web server and web application. So, it works as a middle ware in applications, which process your incoming request
 and validate it. Here we are using SimpleAuthorizationServerProvider, which is nothing but a class which validate user based on their credentials. You can find this class code at the last.</p>
<p>Now it&rsquo;s time to create a model where we can perform database operation like fetching the user information based on credentials and employees data. We can use here different ways to get data like Repository pattern with Unit of work or Dapper. But
 we want to make this example simple and keep the main focus on Token Based Authentication only.&nbsp;So, right click on solution and Click to Add and then New Item and choose&nbsp;<strong>Ado.Net Entity Model.</strong></p>
<ul>
</ul>
<h1>More Information</h1>
<p><em>For more information on X, see .</em></p>
<p><a href="http://www.mukeshkumar.net/articles/web-api/token-based-authentication-in-web-api" >http://www.mukeshkumar.net/articles/web-api/token-based-authentication-in-web-api</a></p>
<p><a href="http://www.mukeshkumar.net/articles/angularjs/web-api-token-based-authentication-with-angular-js">http://www.mukeshkumar.net/articles/angularjs/web-api-token-based-authentication-with-angular-js</a></p>
<p><em>.</em></p>
<p><em><br>
</em></p>

</div>


    </div>
</body>
</html>
